 # 用户认证系统测试用例

## Epic 3: 用户认证系统

### 用户故事 3.1: 用户注册框架

| ID | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 跟踪到验收标准 |
|----|----------|---------|---------|----------|--------------|
| TC-REG-001 | 手机号码长度验证 | 用户访问注册页面 | 1. 输入少于11位的手机号码<br>2. 填写其他必要信息<br>3. 点击"注册"按钮 | 系统提示"请输入11位有效手机号码" | 3.1.1 |
| TC-REG-002 | 密码格式验证 | 用户访问注册页面 | 1. 输入仅包含数字或仅包含字母的密码<br>2. 填写其他必要信息<br>3. 点击"注册"按钮 | 系统提示"密码必须包含数字和字母，长度6-20位" | 3.1.2 |
| TC-REG-003 | 密码一致性验证 | 用户访问注册页面 | 1. 输入密码"Password123"<br>2. 确认密码输入"Password321"<br>3. 填写其他必要信息<br>4. 点击"注册"按钮 | 系统提示"两次输入的密码不一致" | 3.1.3 |
| TC-REG-004 | 成功注册流程 | 用户访问注册页面 | 1. 输入11位有效手机号码<br>2. 输入符合要求的密码并确认<br>3. 填写其他必要信息<br>4. 点击"注册"按钮 | 系统创建账号并跳转到登录页面 | 3.1.4 |
| TC-REG-005 | 手机号码唯一性验证 | 1. 系统中已存在手机号为13800138000的用户<br>2. 用户访问注册页面 | 1. 输入已存在的手机号13800138000<br>2. 填写其他必要信息<br>3. 点击"注册"按钮 | 系统提示"该手机号已被注册" | 扩展测试 |
| TC-REG-006 | 用户角色选择 | 用户访问注册页面 | 1. 填写有效的注册信息<br>2. 选择"学生"或"教师"角色<br>3. 点击"注册"按钮 | 系统创建对应角色的账号 | 扩展测试 |

### 用户故事 3.2: 用户登录框架

| ID | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 跟踪到验收标准 |
|----|----------|---------|---------|----------|--------------|
| TC-LOGIN-001 | 正确凭据登录 | 用户已注册账号 | 1. 访问登录页面<br>2. 输入正确的账号和密码<br>3. 点击"登录"按钮 | 系统验证成功并进入对应角色的主页 | 3.2.1 |
| TC-LOGIN-002 | 错误密码登录 | 用户已注册账号 | 1. 访问登录页面<br>2. 输入正确的用户名和错误的密码<br>3. 点击"登录"按钮 | 系统提示"用户名或密码错误" | 3.2.2 |
| TC-LOGIN-003 | 账户锁定机制 | 用户已注册账号 | 1. 访问登录页面<br>2. 连续输入错误密码3次<br>3. 再次尝试登录 | 系统提示"账号已被锁定，请15分钟后重试" | 3.2.3 |
| TC-LOGIN-004 | 会话过期重定向 | 1. 用户已登录<br>2. 会话已过期 | 1. 尝试执行需要授权的操作 | 系统提示"登录已过期，请重新登录"并重定向到登录页面 | 3.2.4 |
| TC-LOGIN-005 | 记住登录状态 | 用户访问登录页面 | 1. 输入正确的登录信息<br>2. 勾选"记住我"选项<br>3. 点击"登录"按钮<br>4. 关闭浏览器<br>5. 重新打开浏览器访问系统 | 用户无需重新登录即可访问系统 | 扩展测试 |
| TC-LOGIN-006 | 忘记密码流程 | 用户访问登录页面 | 1. 点击"忘记密码"链接<br>2. 输入注册的手机号码<br>3. 接收验证码<br>4. 设置新密码 | 系统允许用户重置密码并成功登录 | 扩展测试 |

### 用户故事 3.3: 用户权限管理

| ID | 测试标题 | 前置条件 | 测试步骤 | 预期结果 | 跟踪到验收标准 |
|----|----------|---------|---------|----------|--------------|
| TC-AUTH-001 | 学生权限范围验证 | 学生用户已登录 | 1. 观察系统主页显示的功能模块<br>2. 尝试访问各功能模块 | 只能看到和访问学生权限范围内的功能模块 | 3.3.1 |
| TC-AUTH-002 | 教师权限范围验证 | 教师用户已登录 | 1. 观察系统主页显示的功能模块<br>2. 尝试访问课程评分结果和教师评价数据 | 可以查看课程评分结果和教师评价数据 | 3.3.2 |
| TC-AUTH-003 | 管理员权限范围验证 | 管理员用户已登录 | 1. 观察系统主页显示的功能模块<br>2. 尝试访问用户管理和数据统计模块 | 可以管理所有用户和查看全部数据统计 | 3.3.3 |
| TC-AUTH-004 | 未授权页面访问拦截 | 用户已登录 | 1. 通过URL直接访问未授权的页面<br>(如学生访问教师评价管理页面) | 系统拦截并重定向到权限错误提示页 | 3.3.4 |
| TC-AUTH-005 | 菜单项权限控制 | 不同角色用户登录 | 1. 观察系统导航菜单<br>2. 比较不同角色显示的菜单项 | 每个角色只显示其权限范围内的菜单项 | 扩展测试 |
| TC-AUTH-006 | API权限验证 | 1. 用户已登录<br>2. 使用开发工具 | 1. 尝试直接调用未授权的API<br>(如学生调用管理员API) | API返回401或403错误，拒绝访问 | 扩展测试 |

## 测试用例与验收标准映射关系

### 用户故事 3.1: 用户注册框架
- 验收标准 3.1.1 通过 TC-REG-001 测试
- 验收标准 3.1.2 通过 TC-REG-002 测试
- 验收标准 3.1.3 通过 TC-REG-003 测试
- 验收标准 3.1.4 通过 TC-REG-004 测试

### 用户故事 3.2: 用户登录框架
- 验收标准 3.2.1 通过 TC-LOGIN-001 测试
- 验收标准 3.2.2 通过 TC-LOGIN-002 测试
- 验收标准 3.2.3 通过 TC-LOGIN-003 测试
- 验收标准 3.2.4 通过 TC-LOGIN-004 测试

### 用户故事 3.3: 用户权限管理
- 验收标准 3.3.1 通过 TC-AUTH-001 测试
- 验收标准 3.3.2 通过 TC-AUTH-002 测试
- 验收标准 3.3.3 通过 TC-AUTH-003 测试
- 验收标准 3.3.4 通过 TC-AUTH-004 测试

## 注意事项
- 所有测试用例都应在不同浏览器环境中测试，确保兼容性
- 部分测试用例为扩展测试，用于更全面地验证系统功能，不直接对应验收标准
- 账号锁定机制应测试解锁时间是否准确(15分钟)